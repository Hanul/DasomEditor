DasomEditor.Editor=CLASS({preset:()=>{return SkyDesktop.Tab},init:(t,e,o)=>{let n,i=o.ftpInfo,r=o.path,s=o.content,a=s,d=e.getTitle();e.getFTPInfo=(()=>{return i}),e.setFTPInfo=(t=>{i=t}),e.getPath=(()=>{return r}),e.setPath=(t=>{if(void 0===i){let e=DasomEditor.IDE.getEditorOpenedStore();e.remove(r),e.save({name:t,value:!0})}r=t}),e.getContent=(()=>{return s}),e.setContent=(t=>{s=t,e.fireEvent("change")}),e.setOriginContent=(t=>{a=t,e.fireEvent("change")}),e.setScrollTop=(t=>{}),e.setFindText=(t=>{});OVERRIDE(e.setTitle,t=>{n=e.setTitle=(t=>{d=t,e.fireEvent("titlechange")}),e.on("change",()=>{t(e.getContent()!==a?"* "+d:d)})});let c;OVERRIDE(e.getTitle,t=>{c=e.getTitle=(()=>{return d})}),e.on("close",()=>{if(e.getContent()!==a&&(""!==e.getContent()||void 0!==a))return SkyDesktop.Confirm({msg:"저장하지 않았습니다. 정말 종료 하시겠습니까?"},()=>{e.remove()}),!1});let f=!0;e.on("active",()=>{void 0!==r&&(f!==!0&&DasomEditor.IDE.load({ftpInfo:i,path:r,isReload:!0},t=>{e.getContent()!==t&&e.getContent()===a&&(e.setContent(t),e.setOriginContent(t))}),f=!1)})}}),DasomEditor.HomeTab=CLASS(t=>{let e;t.remove=(()=>{void 0!==e&&e.remove()});return{preset:()=>{return SkyDesktop.Tab},params:()=>{return{icon:IMG({src:DasomEditor.R("icon/home.png")}),title:"홈"}},init:(t,o,n)=>{o.append(DIV({style:{width:"100%",height:"100%",overflow:"hidden"},c:IFRAME({style:{backgroundColor:"#fff",width:"100%",height:"100%"},src:n,on:{load:(t,e)=>{try{"about:blank"===e.getEl().contentWindow.location.href&&o.remove()}catch(t){}}}})})),void 0!==e&&e.remove(),e=o,o.on("remove",()=>{e=void 0})}}}),DasomEditor.IDE=OBJECT({preset:()=>{return TABLE},params:()=>{return{style:{position:"absolute",width:"100%",height:"100%"}}},init:(t,e)=>{let o,n,i,r,s,a,d,c,f,u,l,p,m,g,E,I,D,k,h,S,y,T,v,C,O,F,R,b,N,x,w,L,M,B,G,U={},_=DasomEditor.STORE("editorSettingStore"),H=DasomEditor.STORE("editorOpenedStore"),V=DasomEditor.STORE("localHistoryStore"),W=[],K=(e.addEditor=(t=>{let e=t.extname,o=t.editor;void 0===U[e]&&(U[e]=[]),U[e].push(o)}),e.getEditor=(t=>{let e=DasomEditor.TextEditor;if(void 0!==_){let o=_.get(t);void 0!==U[t]&&EACH(U[t],t=>{if(void 0===o||t.getName()===o)return e=t,!1})}return e}));e.getEditorOpenedStore=(()=>{return H});e.append(TR({c:TD({style:{height:28},c:G=SkyDesktop.Toolbar({buttons:[SkyDesktop.ToolbarButton({icon:IMG({src:DasomEditor.R("icon/home.png")}),title:"홈",on:{tap:()=>{o()}}}),SkyDesktop.ToolbarButton({icon:IMG({src:SkyDesktop.R("file.png")}),title:"새 파일",on:{tap:()=>{Z(DasomEditor.TextEditor({title:"제목 없음"}))}}}),SkyDesktop.ToolbarButton({icon:IMG({src:DasomEditor.R("icon/save.png")}),title:"저장",on:{tap:()=>{let t=Q.getActiveTab();t.checkIsInstanceOf(DasomEditor.Editor)===!0&&ct(t)}}}),SkyDesktop.ToolbarButton({icon:IMG({src:DasomEditor.R("icon/setting.png")}),title:"에디터 설정",on:{tap:()=>{let t;SkyDesktop.Confirm({okButtonTitle:"저장",style:{onDisplayResize:(t,e)=>{return t>600?{width:500}:{width:"90%"}}},msg:[H2({style:{fontWeight:"bold"},c:"에디터 설정"}),t=DIV({style:{marginTop:8,overflowY:"scroll",padding:8,backgroundColor:"#e0e1e2",border:"1px solid #999",borderRadius:4,textAlign:"left",onDisplayResize:(t,e)=>{return e>500?{height:300}:{height:150}}}})]},()=>{}),EACH(U,(e,o)=>{let n=DIV({style:{padding:"5px 8px",backgroundColor:"#fff",border:"1px solid #999",borderRadius:4,marginBottom:10},c:H3({style:{marginBottom:5},c:[SPAN({style:{fontWeight:"bold"},c:o})," 파일 에디터 선택"]})}).appendTo(t);EACH(e,(t,e)=>{let i;n.append(P({c:[i=INPUT({style:{marginTop:2,flt:"left"},type:"radio",name:o,value:void 0===_.get(o)&&0===e||_.get(o)===t.getName(),on:{change:()=>{_.save({name:o,value:t.getName()})}}}),UUI.BUTTON_H({style:{marginLeft:5,flt:"left"},icon:t.getIcon(),spacing:5,title:t.getName(),on:{tap:()=>{i.toggleCheck()}}}),CLEAR_BOTH()]}))})})}}})]})})}));let z,Y,X,j,J,$,q,Q,Z=(e.addToolbarButton=(t=>{G.addButton(t)}),e.openEditor=(t=>{return Q.addTab(t),t.checkIsInstanceOf(DasomEditor.Editor)===!0&&t.checkIsInstanceOf(DasomEditor.CompareEditor)!==!0&&void 0===t.getFTPInfo()&&(t.on("scroll",RAR(e=>{H.save({name:t.getPath(),value:t.getScrollTop()})})),t.on("remove",()=>{H.remove(t.getPath()),void 0!==$&&0===Q.getAllTabs().length&&(j.setSize($),$=void 0)})),t})),tt=(e.closeAllEditors=(()=>{Q.removeAllTabs()}),(t,e,o)=>{ht();let n=!1;EACH(Q.getAllTabs(),(i,r)=>{if(i.checkIsInstanceOf(DasomEditor.Editor)===!0&&void 0===i.getFTPInfo()&&i.getPath()===t)return n=!0,Q.activeTab(r),void 0!==e&&Q.getActiveTab().setScrollTop(e),void 0!==o&&Q.getActiveTab().setFindText(o),!1}),n!==!0&&st({path:t},n=>{let i=t.substring(t.lastIndexOf("/")+1),r=Z(K(i.substring(i.lastIndexOf(".")+1).toLowerCase())({title:i,path:t,content:n}));void 0!==e&&r.setScrollTop(e),void 0!==o&&r.setFindText(o)})});e.append(TR({c:TD({style:{height:"100%"},c:SkyDesktop.HorizontalTabList({tabs:[j=SkyDesktop.Tab({size:23,c:J=SkyDesktop.TabGroup({activeTabIndex:0,tabs:[q=SkyDesktop.Tab({isCannotClose:!0,icon:IMG({src:DasomEditor.R("icon/workspace.png")}),title:"작업 폴더",c:z=SkyDesktop.FileTree(tt),on:{contextmenu:t=>{DasomEditor.FileContextMenu({folderPath:w,e:t}),t.stop()}}}),SkyDesktop.Tab({style:{onDisplayResize:()=>{return void 0!==j?{width:j.getWidth()-1,overflowX:"auto"}:{}}},isCannotClose:!0,icon:IMG({src:DasomEditor.R("icon/ftp.png")}),title:"FTP",c:[UUI.BUTTON_H({style:{position:"relative",marginLeft:20,padding:"2px 5px"},icon:IMG({src:DasomEditor.R("icon/ftp.png")}),title:"새 FTP 연결",spacing:5,c:UUI.ICON_BUTTON({style:{position:"absolute",left:-12,top:3,color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#444":"#ccc"},icon:FontAwesome.GetIcon("plus"),on:{mouseover:(t,e)=>{e.addStyle({color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#666":"#999"}),t.stop()},mouseout:(t,e)=>{e.addStyle({color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#444":"#ccc"}),t.stop()}}}),on:{tap:t=>{let e,o,n;SkyDesktop.Confirm({okButtonTitle:"저장",msg:e=UUI.VALID_FORM({errorMsgs:{title:{notEmpty:"사이트 이름을 입력해주세요."},host:{notEmpty:"호스트를 입력해주세요."},username:{notEmpty:"아이디를 입력해주세요."}},errorMsgStyle:{color:"red"},c:[INPUT({style:{width:222,padding:8,border:"1px solid #999",borderRadius:4},name:"title",placeholder:"사이트 이름"}),INPUT({style:{marginTop:10,width:222,padding:8,border:"1px solid #999",borderRadius:4},name:"host",placeholder:"호스트"}),INPUT({style:{marginTop:10,width:222,padding:8,border:"1px solid #999",borderRadius:4},name:"port",placeholder:"포트 번호"}),SELECT({style:{marginTop:10,width:240,padding:8,border:"1px solid #999",borderRadius:4},name:"protocol",c:[OPTION({value:"ftp",c:"FTP"}),OPTION({value:"sftp",c:"SFTP"})],on:{change:(t,e)=>{"sftp"===e.getValue()?n.show():n.hide()}}}),INPUT({style:{marginTop:10,width:222,padding:8,border:"1px solid #999",borderRadius:4},name:"username",placeholder:"로그인 아이디"}),INPUT({style:{marginTop:10,width:222,padding:8,border:"1px solid #999",borderRadius:4},type:"password",name:"password",placeholder:"비밀번호"}),n=DIV({style:{display:"none",marginTop:10},c:[H3({c:"Private Key"}),INPUT({style:{marginTop:5,width:222,padding:8,border:"1px solid #999",borderRadius:4},name:"privateKey",type:"file",on:{change:(t,e)=>{let n=new FileReader;n.readAsText(e.getFiles()[0]),n.onload=(t=>{o=t.target.result})}}})]})]})},()=>{let t=e.getData();if(VALID.notEmpty(t.password)!==!0&&void 0===o)return SkyDesktop.Alert({msg:"비밀번호를 입력해주세요."}),!1;{t.privateKey=o;let n=VALID({title:{notEmpty:!0},host:{notEmpty:!0},username:{notEmpty:!0}}),i=n.check(t);if(i.checkHasError()===!0)return e.showErrors(i.getErrors()),!1;{let e=SkyDesktop.LoadingBar("lime");gt(t,()=>{et(t),e.done()})}}}),t.stop()}}}),Y=SkyDesktop.FileTree()]})]})}),SkyDesktop.Tab({size:77,c:X=SkyDesktop.VerticalTabList({tabs:[SkyDesktop.Tab({size:70,c:Q=SkyDesktop.TabGroup({on:{titledoubletap:()=>{void 0===$?($=j.getSize(),j.setSize(0)):(j.setSize($),$=void 0)},tap:()=>{ht()}}})})]})})]})})})),EVENT("resize",()=>{DELAY(()=>{q.addStyle({width:j.getWidth()-1,overflowX:"auto"})})});let et=(e.addItem=(t=>{z.addItem(t)}),e.addFTPItem=(t=>{let e;Y.addItem({key:t.username+"@"+t.host,item:e=DasomEditor.FTPItem(t)}),e.on("open",()=>{let o=SkyDesktop.LoadingBar("lime");g(t,()=>{o.done(),SkyDesktop.Alert({msg:t.title+" 접속에 실패하였습니다."}),e.close()},()=>{o.done(),Et(t,e,".")})})})),ot=e.getFTPItem=((t,e)=>{let o,n="";return EACH(e.split("/"),e=>{""===n&&"."===e?(n=e,o=Y.getItem(t.username+"@"+t.host)):(n+="/"+e,o=o.getItem(n))}),o}),nt=(e.getItem=(t=>{return z.getItem(t)}),e.removeItem=(t=>{z.removeItem(t)}),e.clearFileTree=(()=>{z.removeAllItems()}),[]);EACH(H.all(),(t,e)=>{nt.push({path:e,scrollTop:t})});let it,rt=e.loadFiles=((t,e)=>{let o=SkyDesktop.LoadingBar("lime");i(t,()=>{SkyDesktop.Alert({msg:t+"의 파일 목록을 불러오는데 실패하였습니다."})},(t,n,i)=>{o.done(),e(t,n,i)})}),st=e.load=((t,e)=>{let o=t.ftpInfo,i=t.path,r=t.isReload;if(ht(),void 0!==o){let t;r!==!0&&(t=SkyDesktop.LoadingBar("lime")),E(o,i,()=>{void 0!==t&&t.done(),SkyDesktop.Alert({msg:"FTP로부터 파일을 불러오는데 실패하였습니니다."})},o=>{void 0!==t&&t.done(),e(o)})}else n(i,()=>{SkyDesktop.Alert({msg:"파일을 불러오는데 실패하였습니니다."})},e)}),at=e.checkExists=((t,e)=>{let o=t.ftpInfo,n=t.path;if(void 0!==o){let t=SkyDesktop.LoadingBar("lime");v(o,n,()=>{SkyDesktop.Alert({msg:"파일이 존재하는지 확인하는데 실패하였습니다."})},o=>{t.done(),e(o)})}else u(n,e)}),dt=e.save=((t,e)=>{let o=t.ftpInfo,n=t.path,i=t.content,s=t.isFindAndReplace;if(i.length<1048576){let t=mt({ftpInfo:o,path:n});if(void 0===t&&(t=[]),0===t.length||t[t.length-1].content!==i){t.push({time:new Date,content:i}),t.length>50&&t.splice(0,1);try{V.save({name:STRINGIFY({ftpInfo:o,path:n}),value:t})}catch(t){V.remove(STRINGIFY({ftpInfo:o,path:n}))}}}if(void 0!==o){let t=SkyDesktop.LoadingBar("lime");D(o,n,i,()=>{t.done(),SkyDesktop.Alert({msg:"FTP로 파일을 저장하는데 실패하였습니니다."})},()=>{t.done();let i=n.substring(n.lastIndexOf("/")+1);ot(o,n.substring(0,n.lastIndexOf("/"))).addItem({key:n,item:DasomEditor.File({ftpInfo:o,path:n,title:i,on:{doubletap:()=>{let t=SkyDesktop.LoadingBar("lime");E(o,n,()=>{t.done(),SkyDesktop.Alert({msg:n+"의 파일 목록을 불러오는데 실패하였습니다."})},e=>{t.done(),Z(K(i.substring(i.lastIndexOf(".")+1).toLowerCase())({ftpInfo:o,title:i,path:n,content:e}))})}}})}),void 0!==e&&e(n)})}else r(n,i,()=>{SkyDesktop.Alert({msg:"파일 저장에 실패하였습니니다."})},e,s)}),ct=e.saveTab=(t=>{t.checkIsInstanceOf(DasomEditor.GitEditor)===!0||(t.checkIsInstanceOf(DasomEditor.CompareEditor)===!0?dt({ftpInfo:t.getFTPInfo(),path:t.getPath1(),content:t.getContent1()},()=>{void 0!==t.getPath2()?dt({ftpInfo:t.getFTPInfo(),path:t.getPath2(),content:t.getContent2()},()=>{SkyDesktop.Noti("저장하였습니다.")}):SkyDesktop.Noti("저장하였습니다.")}):dt({ftpInfo:t.getFTPInfo(),path:t.getPath(),content:t.getContent()},e=>{t.setPath(e);let o=e.substring(e.lastIndexOf("/")+1),n=o.substring(o.lastIndexOf(".")+1).toLowerCase(),i=K(n);void 0!==i&&t.setIcon(i.getIcon()),SkyDesktop.Noti("저장하였습니다."),t.setOriginContent(t.getContent()),t.setTitle(o),void 0===t.getFTPInfo()&&H.save({name:t.getPath(),value:t.getScrollTop()})}))}),ft=(e.createFolder=(t=>{let e=t.ftpInfo,o=t.path;if(void 0!==e){let t=SkyDesktop.LoadingBar("lime");k(e,o,()=>{t.done(),SkyDesktop.Alert({msg:"FTP로 폴더를 생성하는데 실패하였습니니다."})},()=>{t.done();let n,i=o.substring(o.lastIndexOf("/")+1);ot(e,o.substring(0,o.lastIndexOf("/"))).addItem({key:o,item:n=DasomEditor.Folder({ftpInfo:e,path:o,title:i,on:{open:()=>{Et(e,n,o)}}})})})}else s(o,()=>{SkyDesktop.Alert({msg:"폴더 생성에 실패하였습니니다."})},()=>{})}),e.copy=(t=>{b(t)})),ut=e.paste=(t=>{let e=t.ftpInfo,o=t.folderPath,n=SkyDesktop.LoadingBar("lime");N(e,o,()=>{SkyDesktop.Alert({msg:"붙여넣기에 실패하였습니니다."})},(t,o)=>{n.done(),void 0!==e&&(EACH(t,t=>{let o,n=t.substring(t.lastIndexOf("/")+1);ot(e,t.substring(0,t.lastIndexOf("/"))).addItem({key:t,item:o=DasomEditor.Folder({ftpInfo:e,path:t,title:n,on:{open:()=>{Et(e,o,t)}}})})}),EACH(o,t=>{let o=t.substring(t.lastIndexOf("/")+1);ot(e,t.substring(0,t.lastIndexOf("/"))).addItem({key:t,item:DasomEditor.File({ftpInfo:e,path:t,title:o,on:{doubletap:()=>{let n=SkyDesktop.LoadingBar("lime");E(e,t,()=>{n.done(),SkyDesktop.Alert({msg:t+"의 파일 목록을 불러오는데 실패하였습니다."})},i=>{n.done(),Z(K(o.substring(o.lastIndexOf(".")+1).toLowerCase())({ftpInfo:e,title:o,path:t,content:i}))})}}})})}))})}),lt=e.remove=(t=>{let e=t.ftpInfo,o=t.path,i=It(o);void 0!==i&&i.remove();let r=z.getItem(o);if(void 0!==r&&yt(r),void 0!==e){let t=SkyDesktop.LoadingBar("lime");NEXT([t=>{E(e,o,()=>{t()},n=>{W.push({ftpInfo:e,path:o,content:n}),t()})},()=>{return()=>{h(e,o,()=>{t.done(),SkyDesktop.Alert({msg:"FTP에서 파일을 삭제하는데 실패하였습니니다."})},()=>{t.done(),ot(e,o.substring(0,o.lastIndexOf("/"))).removeItem(o)})}}])}else NEXT([t=>{n(o,()=>{t()},n=>{W.push({ftpInfo:e,path:o,content:n}),t()})},()=>{return()=>{a(o,()=>{SkyDesktop.Alert({msg:"파일 삭제에 실패하였습니니다."})},()=>{})}}])}),pt=e.move=(t=>{let e=t.fromFTPInfo,o=t.toFTPInfo,n=t.from,i=t.to,r=SkyDesktop.LoadingBar("lime");NEXT([t=>{at({ftpInfo:o,path:i},e=>{e===!0?SkyDesktop.Confirm({msg:i.substring(i.lastIndexOf("/")+1)+"이(가) 존재합니다. 덮어쓰시겠습니까?"},{ok:()=>{t()},cancel:()=>{r.done()}}):t()})},()=>{return()=>{void 0!==e||void 0!==o?S(e,o,n,i,()=>{r.done(),SkyDesktop.Alert({msg:"FTP에서 파일 이동에 실패하였습니니다."})},()=>{r.done();let t=It(n);void 0!==t&&(t.setFTPInfo(o),t.setPath(i),t.setTitle(i.substring(i.lastIndexOf("/")+1)));let s=ot(e,n.substring(0,n.lastIndexOf("/")));if(s.getItem(n).checkIsInstanceOf(DasomEditor.Folder)===!0){let t,e=i.substring(i.lastIndexOf("/")+1);ot(o,i.substring(0,i.lastIndexOf("/"))).addItem({key:i,item:t=DasomEditor.Folder({ftpInfo:o,path:i,title:e,on:{open:()=>{Et(o,t,i)}}})})}else{let t=i.substring(i.lastIndexOf("/")+1);ot(o,i.substring(0,i.lastIndexOf("/"))).addItem({key:i,item:DasomEditor.File({ftpInfo:o,path:i,title:t,on:{doubletap:()=>{let e=SkyDesktop.LoadingBar("lime");E(o,i,()=>{e.done(),SkyDesktop.Alert(i+"의 파일 목록을 불러오는데 실패하였습니다.")},n=>{e.done(),Z(K(t.substring(t.lastIndexOf(".")+1).toLowerCase())({ftpInfo:o,title:t,path:i,content:n}))})}}})})}s.removeItem(n)}):d(n,i,()=>{r.done(),SkyDesktop.Alert({msg:"파일 이동에 실패하였습니니다."})},()=>{r.done();let t=It(n);void 0!==t&&(t.setPath(i),t.setTitle(i.substring(i.lastIndexOf("/")+1)));let e=z.getItem(i);void 0===e?EACH(z.getItems(),t=>{if(t.checkIsInstanceOf(SkyDesktop.Folder)===!0){let o=t.getItem(i);if(void 0!==o)return e=o,!1}}):e.select()})}}])}),mt=(e.clone=(t=>{let e=t.fromFTPInfo,o=t.toFTPInfo,n=t.from,i=t.to,r=SkyDesktop.LoadingBar("lime");NEXT([t=>{at({ftpInfo:o,path:i},e=>{e===!0?SkyDesktop.Confirm({msg:i.substring(i.lastIndexOf("/")+1)+"이(가) 존재합니다. 덮어쓰시겠습니까?"},{ok:()=>{t()},cancel:()=>{r.done()}}):t()})},()=>{return()=>{void 0!==e||void 0!==o?y(e,o,n,i,()=>{r.done(),SkyDesktop.Alert({msg:"FTP에서 파일 복사에 실패하였습니니다."})},()=>{r.done();let t=It(n);void 0!==t&&(t.setFTPInfo(o),t.setPath(i),t.setTitle(i.substring(i.lastIndexOf("/")+1)));let s=ot(e,n.substring(0,n.lastIndexOf("/")));if(s.getItem(n).checkIsInstanceOf(DasomEditor.Folder)===!0){let t,e=i.substring(i.lastIndexOf("/")+1);ot(o,i.substring(0,i.lastIndexOf("/"))).addItem({key:i,item:t=DasomEditor.Folder({ftpInfo:o,path:i,title:e,on:{open:()=>{Et(o,t,i)}}})})}else{let t=i.substring(i.lastIndexOf("/")+1);ot(o,i.substring(0,i.lastIndexOf("/"))).addItem({key:i,item:DasomEditor.File({ftpInfo:o,path:i,title:t,on:{doubletap:()=>{let e=SkyDesktop.LoadingBar("lime");E(o,i,()=>{e.done(),SkyDesktop.Alert(i+"의 파일 목록을 불러오는데 실패하였습니다.")},n=>{e.done(),Z(K(t.substring(t.lastIndexOf(".")+1).toLowerCase())({ftpInfo:o,title:t,path:i,content:n}))})}}})})}}):c(n,i,()=>{r.done(),SkyDesktop.Alert({msg:"파일 복사에 실패하였습니니다."})},()=>{r.done();let t=It(n);void 0!==t&&(t.setPath(i),t.setTitle(i.substring(i.lastIndexOf("/")+1)));let e=z.getItem(i);void 0===e?EACH(z.getItems(),t=>{if(t.checkIsInstanceOf(SkyDesktop.Folder)===!0){let o=t.getItem(i);if(void 0!==o)return e=o,!1}}):e.select()})}}])}),e.getInfo=((t,e)=>{let o=t.ftpInfo,n=t.path;if(void 0!==o){let t=SkyDesktop.LoadingBar("lime");T(o,n,()=>{t.done(),SkyDesktop.Alert({msg:"FTP로부터 파일 정보를 가져오는데에 실패하였습니니다."})},o=>{t.done(),e(o)})}else f(n,()=>{SkyDesktop.Alert({msg:"파일 정보를 가져오는데에 실패하였습니니다."})},e)}),e.getLocalHistory=(t=>{let e=t.ftpInfo,o=t.path;return V.get(STRINGIFY({ftpInfo:e,path:o}))})),gt=e.ftpNew=((t,e)=>{l(t,()=>{SkyDesktop.Alert({msg:"FTP 정보 생성에 실패하였습니다."})},()=>{SkyDesktop.Alert({msg:"이미 존재하는 FTP 정보입니다."})},e)}),Et=(e.ftpDestroy=((t,e)=>{p(t,()=>{SkyDesktop.Alert({msg:"FTP 정보 삭제에 실패하였습니다."})},e)}),(t,e,o)=>{let n=SkyDesktop.LoadingBar("lime");I(t,o,()=>{n.done(),SkyDesktop.Alert({msg:o+"의 파일 목록을 불러오는데 실패하였습니다."})},(i,r)=>{n.done(),EACH(i,n=>{let i;e.addItem({key:o+"/"+n,item:i=DasomEditor.Folder({ftpInfo:t,path:o+"/"+n,title:n,on:{open:()=>{Et(t,i,o+"/"+n)}}})})}),EACH(r,n=>{e.addItem({key:o+"/"+n,item:DasomEditor.File({ftpInfo:t,path:o+"/"+n,title:n,on:{doubletap:()=>{let e=SkyDesktop.LoadingBar("lime");E(t,o+"/"+n,()=>{e.done(),SkyDesktop.Alert({msg:o+"/"+n+"의 파일 목록을 불러오는데 실패하였습니다."})},i=>{e.done(),Z(K(n.substring(n.lastIndexOf(".")+1).toLowerCase())({ftpInfo:t,title:n,path:o+"/"+n,content:i}))})}}})})})})}),It=(e.overFileSize=(t=>{x(t.ftpInfo,t.path)}),e.gitClone=((t,e)=>{C(t,e)}),e.gitDiff=((t,e)=>{O(t,e)}),e.gitPush=((t,e)=>{F(t,e)}),e.gitPull=((t,e)=>{R(t,e)}),e.getOpenedEditor=(t=>{let e;return EACH(Q.getAllTabs(),o=>{o.checkIsInstanceOf(DasomEditor.Editor)===!0&&o.getPath()===t&&(e=o)}),e})),Dt=[],kt=e.selectMultipleFile=(t=>{CHECK_IS_IN({array:Dt,value:t})!==!0&&Dt.push(t),t.select()}),ht=e.deselectFiles=(()=>{EACH(Dt,t=>{t.checkIsRemoved()!==!0&&t.deselect()}),Dt=[]}),St=e.selectFile=(t=>{ht(),Dt.push(t),t.select()}),yt=e.deselectFile=(t=>{REMOVE({array:Dt,value:t}),t.deselect()});e.selectFileRange=(t=>{let e=Dt[Dt.length-1];if(void 0!==e&&t!==e){let o,n;t.getTop()<e.getTop()?(o=t,n=e):(o=e,n=t),Dt=[],kt(o);let i=t=>{EACH(t,t=>{o.getTop()<t.getTop()&&t.getTop()<n.getTop()&&kt(t),t.checkIsInstanceOf(DasomEditor.Folder)===!0&&i(t.getItems())})},r=t.getFTPInfo();i(void 0!==r?Y.getItem(r.username+"@"+r.host).getItems():z.getItems()),kt(n)}}),e.getSelectedFileItems=(()=>{return Dt}),e.checkIsControlMode=(()=>{return it});EVENT("keydown",t=>{if(it===!0){let e=t.getKey().toLowerCase();if("n"===e)Z(DasomEditor.TextEditor({title:"제목 없음"}));else if("c"===e){let t=[];EACH(Dt,e=>{t.push({ftpInfo:e.getFTPInfo(),path:e.getPath()})}),ft(t)}else if("v"===e)Dt.length>0&&ut({ftpInfo:Dt[Dt.length-1].getFTPInfo(),folderPath:Dt[Dt.length-1].getFolderPath()});else if("w"===e||"q"===e)X.getAllTabs().length>1?X.getAllTabs()[1].remove():void 0!==Q.getActiveTab()&&Q.getActiveTab().fireEvent("close")!==!1&&Q.getActiveTab().remove();else if("s"===e)void 0!==Q.getActiveTab()&&ct(Q.getActiveTab()),t.stopDefault();else if("h"===e)0===J.getActiveTabIndex()&&Dt.length>0&&Ct();else if("ArrowLeft"===t.getKey()){let t=Q.getActiveTabIndex();t>0&&Q.activeTab(t-1)}else if("ArrowRight"===t.getKey()){let t=Q.getActiveTabIndex();t<Q.getAllTabs().length-1&&Q.activeTab(t+1)}else if("z"===t.getKey()){let t=W.pop();if(void 0!==t){let e=SkyDesktop.LoadingBar("lime");dt(t,()=>{e.done()})}}}else if("abcdefghijklmnopqrstuvwxyz0123456789".indexOf(t.getKey())!==-1&&Dt.length>0){let e=Dt[Dt.length-1],o=!1;if(e.checkIsInstanceOf(DasomEditor.Folder)===!0&&COUNT_PROPERTIES(e.getItems())>0&&EACH(e.getItems(),e=>{return EACH(e.getParent().getChildren(),e=>{if((e.checkIsInstanceOf(DasomEditor.File)===!0||e.checkIsInstanceOf(DasomEditor.Folder)===!0)&&e.getTitle()[0].toLowerCase()===t.getKey())return o=!0,St(e),!1}),!1}),o!==!0){let o;if(REVERSE_EACH(e.getParent().getChildren(),n=>{if(n.checkIsInstanceOf(DasomEditor.File)===!0||n.checkIsInstanceOf(DasomEditor.Folder)===!0){if(n===e)return!1;if(n.getTitle()[0].toLowerCase()===t.getKey())return o=n,!1}}),void 0===o){if(e.getParent()!==z){let o;REVERSE_EACH(e.getParent().getParent().getChildren(),n=>{if(n.checkIsInstanceOf(DasomEditor.File)===!0||n.checkIsInstanceOf(DasomEditor.Folder)===!0){if(n===e.getParent())return!1;n.getTitle()[0].toLowerCase()===t.getKey()&&(o=n)}}),void 0!==o&&(yt(e),St(o))}}else yt(e),St(o)}}if("Control"===t.getKey()&&(it=!0,void 0!==L&&void 0===M&&L.append(M=FontAwesome.GetIcon({style:{position:"absolute",left:-17},key:"plus"}))),"Delete"===t.getKey()&&Dt.length>0&&SkyDesktop.Confirm({msg:"정말 삭제 하시겠습니까?"},()=>{EACH(Dt,t=>{lt({ftpInfo:t.getFTPInfo(),path:t.getPath()})})}),"Enter"===t.getKey()&&0===UUI.CONFIRM.getCount()&&Dt.length>0&&EACH(Dt,t=>{t.checkIsInstanceOf(DasomEditor.Folder)===!0?t.open():t.checkIsInstanceOf(DasomEditor.File)===!0&&t.fireEvent("doubletap")}),"F2"===t.getKey()&&1===Dt.length){let t=Dt[0],e=t.getPath();SkyDesktop.Prompt({msg:"새 이름을 입력해주시기 바랍니다.",value:e.substring(e.lastIndexOf("/")+1)},o=>{ht(),pt({fromFTPInfo:t.getFTPInfo(),toFTPInfo:t.getFTPInfo(),from:e,to:e.substring(0,e.lastIndexOf("/"))+"/"+o})})}if(Dt.length>0)if("ArrowUp"===t.getKey()){let e,o=Dt[Dt.length-1];if(EACH(o.getParent().getChildren(),t=>{if(t.checkIsInstanceOf(DasomEditor.File)===!0||t.checkIsInstanceOf(DasomEditor.Folder)===!0){if(t===o)return!1;e=t}}),void 0===e){if(o.getParent()!==z){let t;EACH(o.getParent().getParent().getChildren(),e=>{return e!==o.getParent()&&void(t=e)}),void 0!==t&&(yt(o),St(t))}}else yt(o),e.checkIsInstanceOf(DasomEditor.Folder)===!0&&COUNT_PROPERTIES(e.getItems())>0?EACH(e.getItems(),t=>{return REVERSE_EACH(t.getParent().getChildren(),t=>{if(t.checkIsInstanceOf(DasomEditor.File)===!0||t.checkIsInstanceOf(DasomEditor.Folder)===!0)return St(t),!1}),!1}):St(e);t.stopDefault()}else if("ArrowDown"===t.getKey()){let e=Dt[Dt.length-1];if(e.checkIsInstanceOf(DasomEditor.Folder)===!0&&COUNT_PROPERTIES(e.getItems())>0)EACH(e.getItems(),t=>{return EACH(t.getParent().getChildren(),t=>{if(t.checkIsInstanceOf(DasomEditor.File)===!0||t.checkIsInstanceOf(DasomEditor.Folder)===!0)return St(t),!1}),!1});else{let t;if(REVERSE_EACH(e.getParent().getChildren(),o=>{if(o.checkIsInstanceOf(DasomEditor.File)===!0||o.checkIsInstanceOf(DasomEditor.Folder)===!0){if(o===e)return!1;t=o}}),void 0===t){if(e.getParent()!==z){let t;REVERSE_EACH(e.getParent().getParent().getChildren(),o=>{return o!==e.getParent()&&void(t=o)}),void 0!==t&&(yt(e),St(t))}}else yt(e),St(t)}t.stopDefault()}else if("ArrowLeft"===t.getKey()){if("TEXTAREA"!==document.activeElement.tagName&&"INPUT"!==document.activeElement.tagName){let t=Dt[Dt.length-1];if(t.checkIsInstanceOf(DasomEditor.Folder)===!0&&COUNT_PROPERTIES(t.getItems())>0)t.fireEvent("doubletap");else{let e;EACH(t.getParent().getParent().getChildren(),o=>{return o!==t.getParent()&&void(e=o)}),void 0!==e&&(yt(t),St(e))}}t.stopDefault()}else if("ArrowRight"===t.getKey()){if("TEXTAREA"!==document.activeElement.tagName&&"INPUT"!==document.activeElement.tagName){let t=Dt[Dt.length-1];t.checkIsInstanceOf(DasomEditor.Folder)===!0&&COUNT_PROPERTIES(t.getItems())>0?EACH(t.getItems(),t=>{return EACH(t.getParent().getChildren(),t=>{if(t.checkIsInstanceOf(DasomEditor.File)===!0||t.checkIsInstanceOf(DasomEditor.Folder)===!0)return St(t),!1}),!1}):t.checkIsInstanceOf(DasomEditor.Folder)===!0&&t.fireEvent("doubletap")}t.stopDefault()}}),EVENT("keyup",t=>{"Control"===t.getKey()&&(it=!1,void 0!==M&&(M.remove(),M=void 0))});e.setDraggingShadow=(t=>{L=t,it===!0&&L.append(M=FontAwesome.GetIcon({style:{position:"absolute",left:-17},key:"plus"}))}),e.getDraggingShadow=(()=>{return L});EVENT("touchmove",t=>{void 0!==L&&L.addStyle({left:t.getLeft()+10,top:t.getTop()+10})}),EVENT("touchend",()=>{DELAY(()=>{void 0!==L&&(L.remove(),L=void 0,M=void 0)})});let Tt,vt=(e.setWorkspacePath=(t=>{w=t}),e.getWorkspacePath=(()=>{return w}),e.addTab=(t=>{X.addTab(t)})),Ct=e.search=(()=>{SkyDesktop.Prompt({msg:"검색할 문자열을 입력해주세요.",value:Tt},t=>{if(""!==t){let e,o,n,i,r=[];vt(e=SkyDesktop.Tab({style:{position:"relative"},size:30,c:[o=UUI.ICON_BUTTON({style:{position:"absolute",right:10,top:8,color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#444":"#ccc",zIndex:999},icon:FontAwesome.GetIcon("times"),on:{mouseover:(t,e)=>{e.addStyle({color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#666":"#999"})},mouseout:(t,e)=>{e.addStyle({color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#444":"#ccc"})},tap:()=>{e.remove(),EVENT.fireAll("resize")}}}),n=A({style:{position:"absolute",right:30,top:6,color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#666":"#ccc",zIndex:999},c:"전체 변경",on:{mouseover:(t,e)=>{e.addStyle({color:(void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme,"#999")})},mouseout:(t,e)=>{e.addStyle({color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#666":"#ccc"})},tap:()=>{SkyDesktop.Prompt({msg:"변경할 문자열을 입력해주세요."},o=>{let n=SkyDesktop.LoadingBar("lime");NEXT(r,[(e,n)=>{dt({path:e.path,content:e.content.replace(new RegExp(t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"g"),o),isFindAndReplace:!0},()=>{n()})},()=>{return()=>{SkyDesktop.Noti("모두 저장하였습니다."),n.done()}}]),e.remove()})}}}),i=SkyDesktop.FileTree(tt)],on:{scroll:()=>{o.addStyle({top:8+e.getScrollTop()}),n.addStyle({top:6+e.getScrollTop()})}}}));let s=(e,o,n)=>{let a=0;RUN(d=>{let c=0;for(;a<o.length;){let t=o[a];if(rt(e+"/"+t,(o,n)=>{s(e+"/"+t,o,n)}),a+=1,c+=1,20===c)break}if(c<20)for(;a-o.length<n.length;){let s=n[a-o.length],d=e+"/"+s;if(st({path:d},e=>{r.push({path:d,content:e});let o=[];if(EACH(e.split("\n"),(e,n)=>{n+=1,e.toLowerCase().indexOf(t.toLowerCase())!==-1&&o.push({lineNumber:n,line:e})}),o.length>0){let e;i.addItem({key:d,item:e=DasomEditor.FoundFile({path:d,title:d.substring(d.lastIndexOf("/")+1)})}),EACH(o,o=>{e.addItem({key:d+":"+o.lineNumber,item:DasomEditor.FoundLine({path:d,findText:t,lineNumber:o.lineNumber,line:o.line.trim(),on:{doubletap:()=>{tt(d,17*(o.lineNumber-1-10),t)}}})})})}}),a+=1,c+=1,20===c)break}20===c&&i.addItem({key:"__MORE_BUTTON",item:DasomEditor.More({title:"더 보기...",on:{tap:()=>{d()}}})}),a===o.length+n.length&&i.removeItem("__MORE_BUTTON")})};EACH(Dt,t=>{void 0===t.getFTPInfo()&&(t.checkIsInstanceOf(DasomEditor.Folder)===!0?rt(t.getPath(),(e,o)=>{s(t.getPath(),e,o)}):t.checkIsInstanceOf(DasomEditor.File)===!0&&s(t.getFolderPath(),[],[t.getTitle()]))}),Tt=t}})});e.setDropTargetInfo=(t=>{B=t}),e.init=(t=>{o=t.showHome,n=t.load,i=t.loadFiles,r=t.save,s=t.createFolder,a=t.remove,d=t.move,c=t.clone,f=t.getInfo,u=t.checkExists,l=t.ftpNew,p=t.ftpDestroy,m=t.ftpList,g=t.ftpConnect,E=t.ftpLoad,I=t.ftpLoadFiles,D=t.ftpSave,k=t.ftpCreateFolder,h=t.ftpRemove,S=t.ftpMove,y=t.ftpClone,T=t.ftpGetInfo,v=t.ftpCheckExists,b=t.copy,N=t.paste,x=t.overFileSize,C=t.gitClone,O=t.gitDiff,F=t.gitPush,R=t.gitPull,e.appendTo(BODY),e.on("drop",t=>{void 0!==B&&(EACH(t.getFiles(),t=>{let e=t.name,o=new FileReader;o.onload=(t=>{let o=t.target.result,n=SkyDesktop.LoadingBar("lime");NEXT([t=>{at({ftpInfo:B.ftpInfo,path:B.folderPath+"/"+e},o=>{o===!0?SkyDesktop.Confirm({msg:e+"이(가) 존재합니다. 덮어쓰시겠습니까?"},{ok:()=>{t()},cancel:()=>{n.done()}}):t()})},()=>{return()=>{dt({ftpInfo:B.ftpInfo,path:B.folderPath+"/"+e,content:o},()=>{n.done()}),B=void 0}}])}),o.readAsText(t)}),t.stop())}),0===nt.length?o():NEXT(nt,(t,e)=>{let o=t.path;n(o,()=>{H.remove(o),e()},n=>{let i=o.substring(o.lastIndexOf("/")+1),r=Z(K(i.substring(i.lastIndexOf(".")+1).toLowerCase())({title:i,path:o,content:n}));r.setScrollTop(t.scrollTop),e()})}),DELAY(.1,()=>{EVENT.fireAll("resize")})});EVENT("dragover",t=>{t.stop()})}}),DasomEditor.Layout=CLASS(t=>{let e;t.getContent=(()=>{return e});return{preset:()=>{return VIEW},init:(t,o)=>{let n=DIV({}).appendTo(BODY);t.on("close",()=>{n.remove(),e=void 0})}}}),DasomEditor.MAIN=METHOD({run:t=>{DasomEditor.IDE.addEditor({extname:"txt",editor:DasomEditor.TextEditor}),DasomEditor.IDE.addEditor({extname:"js",editor:DasomEditor.JavaScriptEditor}),DasomEditor.IDE.addEditor({extname:"json",editor:DasomEditor.JSONEditor}),DasomEditor.IDE.addEditor({extname:"babelrc",editor:DasomEditor.JSONEditor}),DasomEditor.IDE.addEditor({extname:"html",editor:DasomEditor.HTMLEditor}),DasomEditor.IDE.addEditor({extname:"css",editor:DasomEditor.CSSEditor}),DasomEditor.IDE.addEditor({extname:"hx",editor:DasomEditor.HaxeEditor}),DasomEditor.IDE.addEditor({extname:"as",editor:DasomEditor.ActionScriptEditor}),DasomEditor.IDE.addEditor({extname:"erl",editor:DasomEditor.ErlangEditor}),DasomEditor.IDE.addEditor({extname:"md",editor:DasomEditor.MarkdownEditor}),DasomEditor.IDE.addEditor({extname:"gml",editor:DasomEditor.GMLEditor}),DasomEditor.IDE.addEditor({extname:"php",editor:DasomEditor.PHPEditor}),DasomEditor.IDE.addEditor({extname:"xml",editor:DasomEditor.XMLEditor}),DasomEditor.IDE.addEditor({extname:"java",editor:DasomEditor.JavaEditor}),DasomEditor.IDE.addEditor({extname:"nsp",editor:DasomEditor.NSPEditor}),DasomEditor.IDE.addEditor({extname:"less",editor:DasomEditor.LessEditor}),DasomEditor.IDE.addEditor({extname:"sol",editor:DasomEditor.SolidityEditor})}}),DasomEditor.AceEditor=CLASS({preset:()=>{return DasomEditor.Editor},init:(t,e,o)=>{let n=o.mode,i=o.content;void 0!==i&&i.length>1048576&&(i=void 0,DELAY(()=>{e.remove()}),DasomEditor.IDE.overFileSize({ftpInfo:e.getFTPInfo(),path:e.getPath()}));let r;e.append(r=DIV({style:{height:"100%"},c:i}));let s=ace.edit(r.getEl());s.setTheme("ace/theme/twilight"),s.setFontSize(14),void 0!==n&&s.getSession().setMode("ace/mode/"+n),s.getSession().setUseSoftTabs(!1),s.getSession().on("changeScrollTop",()=>{e.fireEvent("scroll")}),s.getSession().on("change",()=>{e.fireEvent("change")}),s.renderer.setScrollMargin(0,300),s.setShowPrintMargin(!1),s.commands.addCommand({name:"replace2",bindKey:{win:"Ctrl-R",mac:"Command-Option-F"},exec:t=>{ace.config.loadModule("ace/ext/searchbox",e=>{e.Search(t,!0);let o=t.searchBox.$searchBarKb,n=o.commands["Ctrl-f|Commasnd-f|Ctrl-H|Command-Option-F"];void 0!==n&&n.bindKey.indexOf("Ctrl-R")===-1&&(n.bindKey+="|Ctrl-R",o.addCommand(n))})}}),s.$blockScrolling=1/0,e.on("active",()=>{s.focus(),s.resize()});let a=EVENT("resize",()=>{DELAY(.1,()=>{s.resize()})});e.on("remove",()=>{a.remove(),a=void 0});let d;OVERRIDE(e.getScrollTop,t=>{d=e.getScrollTop=(()=>{return s.getSession().getScrollTop()})});let c;OVERRIDE(e.setScrollTop,t=>{c=e.setScrollTop=(t=>{s.getSession().setScrollTop(t)})});let f;OVERRIDE(e.setFindText,t=>{f=e.setFindText=(t=>{ace.config.loadModule("ace/ext/searchbox",e=>{new e.SearchBox(s).show(t)})})});let u;OVERRIDE(e.getContent,t=>{u=e.getContent=(()=>{return s.getValue()})});let l;OVERRIDE(e.setContent,t=>{l=e.setContent=(t=>{i=t,s.setValue(i,1)})}),void 0!==i&&(l(i),s.getSession().setUndoManager(new ace.UndoManager));t.getEditor=(()=>{return r}),t.getAceEditor=(()=>{return s})}}),DasomEditor.GitEditor=CLASS(t=>{let e=STORE("gitInfoStore");return{preset:()=>{return DasomEditor.Editor},init:(t,o,n)=>{let i=n.folderPath;o.setTitle(i.substring(i.lastIndexOf("/")+1)),o.setIcon(IMG({src:DasomEditor.R("icon/git.png")})),DasomEditor.IDE.checkExists({path:i+"/.git"},t=>{t===!0?NEXT([t=>{if(void 0===e.get(i)){let o;SkyDesktop.Confirm({okButtonTitle:"저장",msg:o=UUI.VALID_FORM({errorMsgs:{url:{notEmpty:"저장소 URL을 입력해주세요."},username:{notEmpty:"아이디를 입력해주세요."},password:{notEmpty:"비밀번호를 입력해주세요."}},errorMsgStyle:{color:"red"},c:[INPUT({style:{width:222,padding:8,border:"1px solid #999",borderRadius:4},name:"url",placeholder:"저장소 URL"}),INPUT({style:{marginTop:10,width:222,padding:8,border:"1px solid #999",borderRadius:4},name:"username",placeholder:"아이디"}),INPUT({style:{marginTop:10,width:222,padding:8,border:"1px solid #999",borderRadius:4},type:"password",name:"password",placeholder:"비밀번호"})]})},()=>{let n=o.getData(),r=VALID({url:{notEmpty:!0},username:{notEmpty:!0},password:{notEmpty:!0}}),s=r.check(n);return s.checkHasError()===!0?(o.showErrors(s.getErrors()),!1):(e.save({name:i,value:n}),void t())})}else t()},()=>{return()=>{let t,n,r=e.get(i),s=()=>{t.empty();let e=SkyDesktop.LoadingBar("lime");DasomEditor.IDE.gitDiff({url:r.url,path:i,username:r.username,password:r.password},{error:t=>{e.done(),SkyDesktop.Alert({msg:t})},success:(o,n,i,r)=>{e.done(),EACH(n,e=>{t.append(UUI.BUTTON_H({style:{padding:5},icon:IMG({src:DasomEditor.R("icon/edit.png")
}),spacing:5,title:e}))}),EACH(o,e=>{t.append(UUI.BUTTON_H({style:{padding:5},icon:IMG({src:DasomEditor.R("icon/add.png")}),spacing:5,title:e}))}),EACH(i,e=>{t.append(UUI.BUTTON_H({style:{padding:5},icon:IMG({src:DasomEditor.R("icon/move.png")}),spacing:5,title:e}))}),EACH(r,e=>{t.append(UUI.BUTTON_H({style:{padding:5},icon:IMG({src:DasomEditor.R("icon/delete.png")}),spacing:5,title:e}))})}})};o.append(DIV({style:{padding:10},c:[DIV({style:{padding:5,backgroundColor:"#222"},c:UUI.BUTTON_H({style:{padding:5},icon:IMG({src:DasomEditor.R("icon/setting.png")}),spacing:5,title:"Git 정보 변경",on:{tap:()=>{let t;SkyDesktop.Confirm({okButtonTitle:"저장",msg:t=UUI.VALID_FORM({errorMsgs:{url:{notEmpty:"저장소 URL을 입력해주세요."},username:{notEmpty:"아이디를 입력해주세요."},password:{notEmpty:"비밀번호를 입력해주세요."}},errorMsgStyle:{color:"red"},c:[INPUT({style:{width:222,padding:8,border:"1px solid #999",borderRadius:4},name:"url",value:r.url,placeholder:"저장소 URL"}),INPUT({style:{marginTop:10,width:222,padding:8,border:"1px solid #999",borderRadius:4},name:"username",value:r.username,placeholder:"아이디"}),INPUT({style:{marginTop:10,width:222,padding:8,border:"1px solid #999",borderRadius:4},type:"password",name:"password",value:r.password,placeholder:"비밀번호"})]})},()=>{let o=t.getData(),n=VALID({url:{notEmpty:!0},username:{notEmpty:!0},password:{notEmpty:!0}}),s=n.check(o);return s.checkHasError()===!0?(t.showErrors(s.getErrors()),!1):(e.save({name:i,value:o}),void(r=o))})}}})}),DIV({style:{marginTop:10,padding:5,backgroundColor:"#222"},c:UUI.BUTTON_H({style:{padding:5},icon:IMG({src:DasomEditor.R("icon/pull.png")}),spacing:5,title:"풀",on:{tap:()=>{let t=SkyDesktop.LoadingBar("lime");DasomEditor.IDE.gitPull({url:r.url,path:i,username:r.username,password:r.password},{error:e=>{t.done(),SkyDesktop.Alert({msg:e})},success:()=>{t.done(),SkyDesktop.Noti("풀 받았습니다."),s()}})}}})}),DIV({style:{marginTop:10,padding:5,backgroundColor:"#222"},c:[UUI.BUTTON_H({style:{padding:5},icon:IMG({src:DasomEditor.R("icon/push.png")}),spacing:5,title:"푸시",on:{tap:()=>{let t=SkyDesktop.LoadingBar("lime");DasomEditor.IDE.gitPush({url:r.url,path:i,username:r.username,password:r.password,message:n.getValue()},{error:e=>{t.done(),SkyDesktop.Alert({msg:e})},success:()=>{t.done(),SkyDesktop.Noti("푸시했습니다."),n.setValue("no message"),s()}})}}}),H3({style:{marginTop:5},c:"푸시 메시지"}),n=UUI.FULL_INPUT({style:{marginTop:5},value:"no message"})]}),DIV({style:{marginTop:10,padding:5,backgroundColor:"#222"},c:[UUI.BUTTON_H({style:{padding:5},icon:IMG({src:DasomEditor.R("icon/refresh.png")}),isIconRight:!0,spacing:10,title:"변경 내역",on:{tap:()=>{s()}}}),t=DIV()]})]})),s()}}]):(SkyDesktop.Alert({msg:"Git 저장소가 아닙니다."}),o.remove())})}}}),DasomEditor.ActionScriptEditor=CLASS(t=>{let e=(t.getName=(()=>{return"DasomEditor.ActionScriptEditor"}),t.getIcon=(()=>{return IMG({src:DasomEditor.R("icon/actionscript.png")})}));return{preset:()=>{return DasomEditor.AceEditor},params:()=>{return{mode:"actionscript",icon:e()}}}}),DasomEditor.CompareEditor=CLASS({preset:()=>{return DasomEditor.Editor},params:()=>{return{icon:IMG({src:DasomEditor.R("icon/compare.png")})}},init:(t,e,o)=>{let n,i,r,s=o.path1,a=o.content1,d=(o.path2,o.content2),c=Date.now(),f="__COMPARE_LEFT_"+c,u="__COMPARE_GUTTER_"+c,l="__COMPARE_RIGHT_"+c;e.append(n=DIV({style:{flt:"left",width:"45%",height:"100%"}})),n.getEl().setAttribute("id",f),e.append(i=DIV({style:{flt:"left",width:"10%",height:"100%",overflow:"hidden"}})),i.getEl().setAttribute("id",u),e.append(r=DIV({style:{flt:"left",width:"45%",height:"100%"}})),r.getEl().setAttribute("id",l),e.append(CLEAR_BOTH());let p;e.on("show",()=>{p=new AceDiff({left:{id:f,content:a},right:{id:l,content:d},classes:{gutterID:u}});let t=t=>{t.setTheme("ace/theme/twilight"),t.setFontSize(14),p.lineHeight=t.renderer.lineHeight,t.getSession().setUseSoftTabs(!1),t.getSession().on("changeScrollTop",()=>{e.fireEvent("scroll")}),t.getSession().on("change",()=>{e.fireEvent("change")}),t.renderer.setScrollMargin(0,300),t.commands.addCommand({name:"replace2",bindKey:{win:"Ctrl-R",mac:"Command-Option-F"},exec:t=>{ace.config.loadModule("ace/ext/searchbox",e=>{e.Search(t,!0);let o=t.searchBox.$searchBarKb,n=o.commands["Ctrl-f|Commasnd-f|Ctrl-H|Command-Option-F"];void 0!==n&&n.bindKey.indexOf("Ctrl-R")===-1&&(n.bindKey+="|Ctrl-R",o.addCommand(n))})}}),t.$blockScrolling=1/0};t(p.getEditors().left),t(p.getEditors().right)}),e.on("remove",()=>{void 0!==p&&p.destroy()});e.getPath1=(()=>{return s}),e.getContent1=(()=>{return a}),e.getPath2=(()=>{return s}),e.getContent2=(()=>{return d})}}),DasomEditor.CSSEditor=CLASS(t=>{let e=(t.getName=(()=>{return"DasomEditor.CSSEditor"}),t.getIcon=(()=>{return IMG({src:DasomEditor.R("icon/css.png")})}));return{preset:()=>{return DasomEditor.AceEditor},params:()=>{return{mode:"css",icon:e()}}}}),DasomEditor.ErlangEditor=CLASS(t=>{let e=(t.getName=(()=>{return"DasomEditor.ErlangEditor"}),t.getIcon=(()=>{return IMG({src:DasomEditor.R("icon/erlang.png")})}));return{preset:()=>{return DasomEditor.AceEditor},params:()=>{return{mode:"erlang",icon:e()}}}}),DasomEditor.GMLEditor=CLASS(t=>{let e=(t.getName=(()=>{return"DasomEditor.GMLEditor"}),t.getIcon=(()=>{return IMG({src:DasomEditor.R("icon/gml.png")})}));return{preset:()=>{return DasomEditor.AceEditor},params:()=>{return{mode:"gml",icon:e()}}}}),DasomEditor.HaxeEditor=CLASS(t=>{let e=(t.getName=(()=>{return"DasomEditor.HaxeEditor"}),t.getIcon=(()=>{return IMG({src:DasomEditor.R("icon/haxe.png")})}));return{preset:()=>{return DasomEditor.AceEditor},params:()=>{return{mode:"haxe",icon:e()}}}}),DasomEditor.HTMLEditor=CLASS(t=>{let e=(t.getName=(()=>{return"DasomEditor.HTMLEditor"}),t.getIcon=(()=>{return IMG({src:DasomEditor.R("icon/html.png")})}));return{preset:()=>{return DasomEditor.AceEditor},params:()=>{return{mode:"html",icon:e()}}}}),DasomEditor.JavaEditor=CLASS(t=>{let e=(t.getName=(()=>{return"DasomEditor.JavaEditor"}),t.getIcon=(()=>{return IMG({src:DasomEditor.R("icon/java.png")})}));return{preset:()=>{return DasomEditor.AceEditor},params:()=>{return{mode:"java",icon:e()}}}}),DasomEditor.JavaScriptEditor=CLASS(t=>{let e=(t.getName=(()=>{return"DasomEditor.JavaScriptEditor"}),t.getIcon=(()=>{return IMG({src:DasomEditor.R("icon/javascript.png")})}));return{preset:()=>{return DasomEditor.AceEditor},params:()=>{return{mode:"javascript",icon:e()}}}}),DasomEditor.JSONEditor=CLASS(t=>{let e=(t.getName=(()=>{return"DasomEditor.JSONEditor"}),t.getIcon=(()=>{return IMG({src:DasomEditor.R("icon/json.png")})}));return{preset:()=>{return DasomEditor.AceEditor},params:()=>{return{mode:"json",icon:e()}}}}),DasomEditor.LessEditor=CLASS(t=>{let e=(t.getName=(()=>{return"DasomEditor.LessEditor"}),t.getIcon=(()=>{return IMG({src:DasomEditor.R("icon/less.png")})}));return{preset:()=>{return DasomEditor.AceEditor},params:()=>{return{mode:"less",icon:e()}}}}),DasomEditor.MarkdownEditor=CLASS(t=>{let e=(t.getName=(()=>{return"DasomEditor.MarkdownEditor"}),t.getIcon=(()=>{return IMG({src:DasomEditor.R("icon/markdown.png")})}));return{preset:()=>{return DasomEditor.AceEditor},params:()=>{return{mode:"markdown",icon:e()}},init:(t,e)=>{let o=t.getEditor(),n=t.getAceEditor(),i=new Worker(DasomEditor.R("js/markdown-generate-worker.js"));n.getSession().setUseWrapMode(!0),o.addStyle({flt:"left",width:"50%"});let r,s;e.append(r=DIV({style:{flt:"left",backgroundColor:"#fff",color:"#000",height:"100%",overflow:"scroll",onDisplayResize:()=>{return{width:o.getWidth()-1}}},c:s=DIV({style:{padding:10,fontSize:14}})})),e.on("active",()=>{r.addStyle({width:o.getWidth()-1})}),e.append(CLEAR_BOTH()),i.addEventListener("message",t=>{s.getEl().innerHTML=t.data},!1),s.getEl().setAttribute("class","markdown-body");let a,d;n.getSession().on("change",RAR(()=>{let t=n.getValue();void 0!==a&&clearTimeout(a),a=setTimeout(()=>{d!==t&&(i.postMessage(t),d=t),a=void 0},500)}))}}}),DasomEditor.NSPEditor=CLASS(t=>{let e=(t.getName=(()=>{return"DasomEditor.NSPEditor"}),t.getIcon=(()=>{return IMG({src:DasomEditor.R("icon/nsp.png")})}));return{preset:()=>{return DasomEditor.AceEditor},params:()=>{return{mode:"nsp",icon:e()}}}}),DasomEditor.PHPEditor=CLASS(t=>{let e=(t.getName=(()=>{return"DasomEditor.PHPEditor"}),t.getIcon=(()=>{return IMG({src:DasomEditor.R("icon/php.png")})}));return{preset:()=>{return DasomEditor.AceEditor},params:()=>{return{mode:"php",icon:e()}}}}),DasomEditor.SolidityEditor=CLASS(t=>{let e=(t.getName=(()=>{return"DasomEditor.SolidityEditor"}),t.getIcon=(()=>{return IMG({src:DasomEditor.R("icon/solidity.png")})}));return{preset:()=>{return DasomEditor.AceEditor},params:()=>{return{mode:"solidity",icon:e()}}}}),DasomEditor.TextEditor=CLASS(t=>{let e=(t.getName=(()=>{return"DasomEditor.TextEditor"}),t.getIcon=(()=>{return IMG({src:SkyDesktop.R("file.png")})}));return{preset:()=>{return DasomEditor.AceEditor},params:()=>{return{mode:"text",icon:e()}},init:(t,e)=>{t.getAceEditor().getSession().setUseWrapMode(!0)}}}),DasomEditor.XMLEditor=CLASS(t=>{let e=(t.getName=(()=>{return"DasomEditor.XMLEditor"}),t.getIcon=(()=>{return IMG({src:DasomEditor.R("icon/xml.png")})}));return{preset:()=>{return DasomEditor.AceEditor},params:()=>{return{mode:"xml",icon:e()}}}}),DasomEditor.File=CLASS({preset:()=>{return SkyDesktop.File},init:(t,e,o)=>{let n=o.ftpInfo,i=o.title,r=e.getPath(),s=r.substring(0,r.lastIndexOf("/")),a=(e.getFTPInfo=(()=>{return n}),e.getFolderPath=(()=>{return s}),DasomEditor.IDE.getEditor(i.substring(i.lastIndexOf(".")+1).toLowerCase()));void 0!==a&&e.setIcon(a.getIcon());let d,c,f,u,l;e.on("touchstart",t=>{f=!0,u=t.getLeft(),l=t.getTop()});let p=EVENT("touchmove",t=>{if(void 0===DasomEditor.IDE.getDraggingShadow()&&f===!0&&(Math.abs(u-t.getLeft())>5||Math.abs(l-t.getTop())>5)){CHECK_IS_IN({array:DasomEditor.IDE.getSelectedFileItems(),value:e})!==!0&&DasomEditor.IDE.selectFile(e);let o=DasomEditor.IDE.getSelectedFileItems().length;DasomEditor.IDE.setDraggingShadow(DIV({style:{position:"fixed",left:t.getLeft()+10,top:t.getTop()+10},c:o>1?o+"개 파일":e.getTitle()}).appendTo(BODY))}}),m=EVENT("touchend",()=>{f===!0&&(f=!1)});e.on("touchend",()=>{void 0!==DasomEditor.IDE.getDraggingShadow()&&EACH(DasomEditor.IDE.getSelectedFileItems(),t=>{let e=t.getPath();(DasomEditor.IDE.checkIsControlMode()===!0?DasomEditor.IDE.clone:DasomEditor.IDE.move)({fromFTPInfo:t.getFTPInfo(),toFTPInfo:n,from:e,to:s+"/"+e.substring(e.lastIndexOf("/")+1)})})}),e.on("tap",t=>{d===!0?DasomEditor.IDE.selectMultipleFile(e):c===!0?DasomEditor.IDE.selectFileRange(e):DasomEditor.IDE.selectFile(e)}),e.on("contextmenu",t=>{CHECK_IS_IN({array:DasomEditor.IDE.getSelectedFileItems(),value:e})!==!0&&DasomEditor.IDE.selectFile(e),DasomEditor.FileContextMenu({ftpInfo:n,path:r,folderPath:s,e:t}),t.stop()}),e.on("drop",t=>{DasomEditor.IDE.setDropTargetInfo({ftpInfo:n,folderPath:s})});let g=EVENT("keydown",t=>{"Control"===t.getKey()&&(d=!0),"Shift"===t.getKey()&&(c=!0)}),E=EVENT("keyup",t=>{"Control"===t.getKey()&&(d=!1),"Shift"===t.getKey()&&(c=!1)});e.on("remove",()=>{p.remove(),p=void 0,m.remove(),m=void 0,g.remove(),g=void 0,E.remove(),E=void 0})}}),DasomEditor.FileContextMenu=CLASS({preset:()=>{return SkyDesktop.ContextMenu},init:(t,e,o)=>{let n=o.ftpInfo,i=o.path,r=o.folderPath,s=DasomEditor.IDE.getSelectedFileItems();if(s.length>0&&e.append(SkyDesktop.ContextMenuItem({title:"열기",icon:IMG({src:DasomEditor.R("icon/open.png")}),on:{tap:()=>{EACH(s,t=>{t.checkIsInstanceOf(DasomEditor.Folder)===!0?t.open():t.checkIsInstanceOf(DasomEditor.File)===!0&&t.fireEvent("doubletap")}),e.remove()}}})),e.append(SkyDesktop.ContextMenuItem({title:"새 파일",icon:IMG({src:SkyDesktop.R("file.png")}),on:{tap:()=>{SkyDesktop.Prompt("파일명을 입력해주시기 바랍니다.",t=>{""!==t.trim()&&RUN(e=>{DasomEditor.IDE.checkExists({ftpInfo:n,path:r+"/"+t},o=>{if(o===!0){let o="",n=t.lastIndexOf(".");n!==-1&&(o=t.substring(n),t=t.substring(0,n)),t=t+" (2)"+o,e()}else DasomEditor.IDE.saveTab(DasomEditor.IDE.openEditor(DasomEditor.IDE.getEditor(t.substring(t.lastIndexOf(".")+1).toLowerCase())({ftpInfo:n,title:t,path:r+"/"+t})))})})}),e.remove()}}})),e.append(SkyDesktop.ContextMenuItem({title:"새 폴더",icon:IMG({src:SkyDesktop.R("folder.png")}),on:{tap:()=>{SkyDesktop.Prompt("폴더명을 입력해주시기 바랍니다.",t=>{""!==t.trim()&&DasomEditor.IDE.createFolder({ftpInfo:n,path:r+"/"+t})}),e.remove()}}})),s.length>0&&e.append(SkyDesktop.ContextMenuItem({title:"복사",icon:IMG({src:DasomEditor.R("icon/copy.png")}),on:{tap:()=>{let t=[];EACH(s,e=>{t.push({ftpInfo:e.getFTPInfo(),path:e.getPath()})}),DasomEditor.IDE.copy(t),e.remove()}}})),e.append(SkyDesktop.ContextMenuItem({title:"붙여넣기",icon:IMG({src:DasomEditor.R("icon/paste.png")}),on:{tap:()=>{DasomEditor.IDE.paste({ftpInfo:n,folderPath:r}),e.remove()}}})),s.length>0&&e.append(SkyDesktop.ContextMenuItem({title:"삭제",icon:IMG({src:DasomEditor.R("icon/delete.png")}),on:{tap:()=>{SkyDesktop.Confirm({msg:"정말 삭제 하시겠습니까?"},()=>{EACH(s,t=>{DasomEditor.IDE.remove({ftpInfo:t.getFTPInfo(),path:t.getPath()})})}),e.remove()}}})),void 0!==i&&1===s.length&&(e.append(SkyDesktop.ContextMenuItem({title:"이름 변경",icon:IMG({src:DasomEditor.R("icon/rename.png")}),on:{tap:()=>{SkyDesktop.Prompt({msg:"새 이름을 입력해주시기 바랍니다.",value:i.substring(i.lastIndexOf("/")+1)},t=>{DasomEditor.IDE.deselectFiles(),DasomEditor.IDE.move({fromFTPInfo:n,toFTPInfo:n,from:i,to:i.substring(0,i.lastIndexOf("/"))+"/"+t})}),e.remove()}}})),e.append(SkyDesktop.ContextMenuItem({title:"파일 정보",icon:IMG({src:DasomEditor.R("icon/info.png")}),on:{tap:()=>{DasomEditor.IDE.getInfo({ftpInfo:n,path:i},t=>{let e,o=CALENDAR(t.createTime),n=CALENDAR(t.lastUpdateTime);SkyDesktop.Alert({style:{onDisplayResize:(t,e)=>{return t>400?{width:380}:{width:"90%"}}},msg:e=TABLE({style:{textAlign:"left"},c:[TR({c:[TH({style:{width:90},c:"경로"}),TD({style:{wordBreak:"break-all"},c:i})]}),TR({c:[TH({style:{width:60},c:"파일 생성일"}),TD({style:{wordBreak:"break-all"},c:o.getYear()+"년 "+o.getMonth()+"월 "+o.getDate()+"일 "+o.getHour()+"시 "+o.getMinute()+"분"})]}),TR({c:[TH({style:{width:60},c:"최종 수정일"}),TD({style:{wordBreak:"break-all"},c:n.getYear()+"년 "+n.getMonth()+"월 "+n.getDate()+"일 "+n.getHour()+"시 "+n.getMinute()+"분"})]})]})}),void 0!==t.size&&e.append(TR({c:[TH({style:{width:60},c:"파일 크기"}),TD({style:{wordBreak:"break-all"},c:Math.ceil(t.size/1e3)+"KB"})]}))}),e.remove()}}})),s[0].checkIsInstanceOf(DasomEditor.File)===!0&&e.append(SkyDesktop.ContextMenuItem({title:"로컬 저장 기록 보기",icon:IMG({src:DasomEditor.R("icon/history.png")}),on:{tap:()=>{let t,o,r;DasomEditor.IDE.addTab(t=SkyDesktop.Tab({style:{position:"relative"},size:30,c:[o=UUI.ICON_BUTTON({style:{position:"absolute",right:10,top:8,color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#444":"#ccc",zIndex:999},icon:FontAwesome.GetIcon("times"),on:{mouseover:(t,e)=>{e.addStyle({color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#666":"#999"})},mouseout:(t,e)=>{e.addStyle({color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#444":"#ccc"})},tap:()=>{t.remove(),EVENT.fireAll("resize")}}}),r=DIV()],on:{scroll:()=>{o.addStyle({top:8+t.getScrollTop()})}}})),DasomEditor.IDE.load({path:i},t=>{let e=DasomEditor.IDE.getLocalHistory({ftpInfo:n,path:i});REVERSE_EACH(e,e=>{if(e.content!==t){let o=CALENDAR(e.time),n=o.getYear()+"-"+o.getMonth(!0)+"-"+o.getDate(!0)+" "+o.getHour(!0)+":"+o.getMinute(!0);r.append(DasomEditor.HistoryItem({title:n,on:{doubletap:()=>{DasomEditor.IDE.openEditor(DasomEditor.CompareEditor({title:"로컬 저장 기록 비교 (현재 - "+n+")",path1:i,content1:t,content2:e.content}))}}}))}})}),e.remove()}}}))),void 0===n&&s.length>0&&e.append(SkyDesktop.ContextMenuItem({title:"검색",icon:IMG({src:DasomEditor.R("icon/search.png")}),on:{tap:()=>{DasomEditor.IDE.search(),e.remove()}}})),s.length>=2){let t,o;EACH(s,e=>{if(e.checkIsInstanceOf(DasomEditor.File)===!0){if(void 0!==t)return o=e,!1;t=e}}),void 0!==o&&e.append(SkyDesktop.ContextMenuItem({title:"두 파일 비교",icon:IMG({src:DasomEditor.R("icon/compare.png")}),on:{tap:()=>{let n=t.getPath(),i=o.getPath();DasomEditor.IDE.load({ftpInfo:t.getFTPInfo(),path:n},t=>{DasomEditor.IDE.load({ftpInfo:o.getFTPInfo(),path:i},e=>{let o=n.substring(n.lastIndexOf("/")+1),r=i.substring(i.lastIndexOf("/")+1);DasomEditor.IDE.openEditor(DasomEditor.CompareEditor({title:"두 파일 비교 ("+o+" - "+r+")",path1:n,content1:t,path2:i,content2:e}))})}),e.remove()}}}))}r.substring(0,r.lastIndexOf("/"))===DasomEditor.IDE.getWorkspacePath()&&e.append(SkyDesktop.ContextMenuItem({title:"Git 설정",icon:IMG({src:DasomEditor.R("icon/git.png")}),on:{tap:()=>{DasomEditor.IDE.openEditor(DasomEditor.GitEditor({folderPath:r})),e.remove()}}}))}}),DasomEditor.Folder=CLASS({preset:()=>{return SkyDesktop.Folder},init:(t,e,o)=>{let n,i,r,s,a,d=o.ftpInfo,c=e.getPath(),f=e.getPath();e.getFTPInfo=(()=>{return d}),e.getFolderPath=(()=>{return f});e.on("touchstart",t=>{r=!0,s=t.getLeft(),a=t.getTop()});let u=EVENT("touchmove",t=>{if(void 0===DasomEditor.IDE.getDraggingShadow()&&r===!0&&(Math.abs(s-t.getLeft())>5||Math.abs(a-t.getTop())>5)){CHECK_IS_IN({array:DasomEditor.IDE.getSelectedFileItems(),value:e})!==!0&&DasomEditor.IDE.selectFile(e);let o=DasomEditor.IDE.getSelectedFileItems().length;DasomEditor.IDE.setDraggingShadow(DIV({style:{position:"fixed",left:t.getLeft()+10,top:t.getTop()+10},c:o>1?o+"개 파일":e.getTitle()}).appendTo(BODY))}}),l=EVENT("touchend",()=>{r===!0&&(r=!1)});e.on("touchend",()=>{void 0!==DasomEditor.IDE.getDraggingShadow()&&EACH(DasomEditor.IDE.getSelectedFileItems(),t=>{let e=t.getPath();(DasomEditor.IDE.checkIsControlMode()===!0?DasomEditor.IDE.clone:DasomEditor.IDE.move)({fromFTPInfo:t.getFTPInfo(),toFTPInfo:d,from:e,to:f+"/"+e.substring(e.lastIndexOf("/")+1)})})}),e.on("tap",()=>{n===!0?DasomEditor.IDE.selectMultipleFile(e):i===!0?DasomEditor.IDE.selectFileRange(e):DasomEditor.IDE.selectFile(e)}),e.on("contextmenu",t=>{CHECK_IS_IN({array:DasomEditor.IDE.getSelectedFileItems(),value:e})!==!0&&DasomEditor.IDE.selectFile(e),DasomEditor.FileContextMenu({ftpInfo:d,path:c,folderPath:f,e:t}),t.stop()}),e.on("drop",t=>{DasomEditor.IDE.setDropTargetInfo({ftpInfo:d,folderPath:f})});let p=EVENT("keydown",t=>{"Control"===t.getKey()&&(n=!0),"Shift"===t.getKey()&&(i=!0)}),m=EVENT("keyup",t=>{"Control"===t.getKey()&&(n=!1),"Shift"===t.getKey()&&(i=!1)});e.on("remove",()=>{u.remove(),u=void 0,l.remove(),l=void 0,p.remove(),p=void 0,m.remove(),m=void 0});let g;OVERRIDE(e.getItem,t=>{g=e.getItem=(o=>{let n=t(o);return void 0===n&&EACH(e.getItems(),t=>{if(t.checkIsInstanceOf(SkyDesktop.Folder)===!0){let e=t.getItem(o);if(void 0!==e)return n=e,!1}}),n})})}}),DasomEditor.FoundFile=CLASS({preset:()=>{return SkyDesktop.File},params:()=>{return{style:{position:"relative"}}},init:(t,e,o)=>{let n=o.title,i=DasomEditor.IDE.getEditor(n.substring(n.lastIndexOf(".")+1).toLowerCase());void 0!==i&&e.setIcon(i.getIcon());let r;e.append(r=UUI.ICON_BUTTON({style:{position:"absolute",left:-12,top:3,color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#444":"#ccc"},icon:FontAwesome.GetIcon("chevron-right"),on:{mouseover:(t,e)=>{e.addStyle({color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#666":"#999"}),t.stop()},mouseout:(t,e)=>{e.addStyle({color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#444":"#ccc"}),t.stop()},tap:t=>{s.checkIsShowing()===!0?d():a(),t.stop()}}}));let s=UUI.LIST({style:{marginLeft:20}});e.after(s);let a=e.open=(()=>{s.show(),r.setIcon(FontAwesome.GetIcon("chevron-down")),r.addStyle({left:-14,top:1}),e.fireEvent("open")}),d=e.close=(()=>{s.hide(),r.setIcon(FontAwesome.GetIcon("chevron-right")),r.addStyle({left:-12,top:2}),e.fireEvent("close")});e.on("remove",()=>{DELAY(()=>{s.remove()})});let c=e.addItem=(t=>{s.addItem(t),EVENT.fireAll("resize")});void 0!==o&&void 0!==o.items&&EACH(o.items,(t,e)=>{c({key:e,item:t})});let f;e.getItems=(()=>{return s.getItems()}),e.getItem=(t=>{return s.getItem(t)}),e.removeItem=(t=>{s.removeItem(t)}),e.removeAllItems=(()=>{s.removeAllItems()});e.on("mouseover",(t,e)=>{f!==!0&&e.addStyle({backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#003333":"#AFCEFF"})}),e.on("mouseout",(t,e)=>{f!==!0&&e.addStyle({backgroundColor:"transparent"})});e.select=(()=>{e.addStyle({backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#17344D":"#A2C5FF"}),f=!0}),e.checkInSelected=(()=>{return f}),e.deselect=(()=>{e.addStyle({backgroundColor:"transparent"}),f=!1})}}),DasomEditor.FoundLine=CLASS({preset:()=>{return UUI.BUTTON_H},params:()=>{return{style:{marginLeft:20,padding:"2px 5px",cursor:"default"},icon:IMG({src:DasomEditor.R("icon/found-line.png")}),spacing:5}},init:(t,e,o)=>{let n=(o.path,o.findText),i=o.lineNumber,r=o.line,s=[i,": "],a=r.toLowerCase(),d=n.toLowerCase();for(;a.indexOf(d)!==-1;){let t=a.indexOf(d),e=r.substring(t,t+d.length);s.push(r.substring(0,t)),s.push(SPAN({style:{backgroundColor:"red"},c:e})),r=r.substring(t+d.length),a=a.substring(t+d.length)}s.push(r),e.setTitle(SPAN({c:s}));let c;e.on("mouseover",(t,e)=>{c!==!0&&e.addStyle({backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#003333":"#AFCEFF"})}),e.on("mouseout",(t,e)=>{c!==!0&&e.addStyle({backgroundColor:"transparent"})});e.select=(()=>{e.addStyle({backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#17344D":"#A2C5FF"}),c=!0}),e.checkInSelected=(()=>{return c}),e.deselect=(()=>{e.addStyle({backgroundColor:"transparent"}),c=!1})}}),DasomEditor.FTPItem=CLASS({preset:()=>{return UUI.BUTTON_H},params:()=>{return{style:{position:"relative",marginLeft:20,padding:"2px 5px",cursor:"default"},icon:IMG({src:DasomEditor.R("icon/ftp.png")}),spacing:5}},init:(t,e,o)=>{let n;e.append(n=UUI.ICON_BUTTON({style:{position:"absolute",left:-12,top:3,color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#444":"#ccc"},icon:FontAwesome.GetIcon("chevron-right"),on:{mouseover:(t,e)=>{e.addStyle({color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#666":"#999"}),t.stop()},mouseout:(t,e)=>{e.addStyle({color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#444":"#ccc"}),t.stop()},tap:t=>{i.checkIsShowing()===!0?s():r(),t.stop()}}}));let i=UUI.LIST({style:{marginLeft:20}});e.after(i);let r=e.open=(()=>{i.show(),n.setIcon(FontAwesome.GetIcon("chevron-down")),n.addStyle({left:-14,top:1}),e.fireEvent("open")}),s=e.close=(()=>{i.hide(),n.setIcon(FontAwesome.GetIcon("chevron-right")),n.addStyle({left:-12,top:2}),e.fireEvent("close")});i.hide(),e.on("doubletap",()=>{i.checkIsShowing()===!0?s():r()}),e.on("remove",()=>{DELAY(()=>{i.remove()})});let a,d=()=>{i.sortItems((t,e)=>{return t.checkIsInstanceOf(SkyDesktop.File)===!0&&e.checkIsInstanceOf(SkyDesktop.File)===!0||t.checkIsInstanceOf(SkyDesktop.Folder)===!0&&e.checkIsInstanceOf(SkyDesktop.Folder)===!0?t.getTitle().toLowerCase().localeCompare(e.getTitle().toLowerCase()):t.checkIsInstanceOf(SkyDesktop.File)===!0&&e.checkIsInstanceOf(SkyDesktop.Folder)===!0?1:t.checkIsInstanceOf(SkyDesktop.Folder)===!0&&e.checkIsInstanceOf(SkyDesktop.File)===!0?-1:t.checkIsInstanceOf(SkyDesktop.File)!==!0&&t.checkIsInstanceOf(SkyDesktop.Folder)!==!0?1:e.checkIsInstanceOf(SkyDesktop.File)!==!0&&e.checkIsInstanceOf(SkyDesktop.Folder)!==!0?-1:0})};e.addItem=(t=>{i.addItem(t),d(),EVENT.fireAll("resize")}),e.getItems=(()=>{return i.getItems()}),e.getItem=(t=>{return i.getItem(t)}),e.removeItem=(t=>{i.removeItem(t),d()}),e.removeAllItems=(()=>{i.removeAllItems()});e.on("mouseover",(t,e)=>{a!==!0&&e.addStyle({backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#003333":"#AFCEFF"})}),e.on("mouseout",(t,e)=>{a!==!0&&e.addStyle({backgroundColor:"transparent"})}),e.on("contextmenu",t=>{let n=SkyDesktop.ContextMenu({e:t,c:[SkyDesktop.ContextMenuItem({title:"정보 수정",on:{tap:()=>{let t,i,r=o.privateKey;SkyDesktop.Confirm({okButtonTitle:"저장",msg:t=UUI.VALID_FORM({errorMsgs:{title:{notEmpty:"사이트 이름을 입력해주세요."},host:{notEmpty:"호스트를 입력해주세요."},username:{notEmpty:"아이디를 입력해주세요."}},errorMsgStyle:{color:"red"},c:[INPUT({style:{width:222,padding:8,border:"1px solid #999",borderRadius:4},name:"title",value:o.title,placeholder:"사이트 이름"}),INPUT({style:{marginTop:10,width:222,padding:8,border:"1px solid #999",borderRadius:4},name:"host",value:o.host,placeholder:"호스트"}),INPUT({style:{marginTop:10,width:222,padding:8,border:"1px solid #999",borderRadius:4},name:"port",value:o.port,placeholder:"포트 번호"}),SELECT({style:{marginTop:10,width:240,padding:8,border:"1px solid #999",borderRadius:4},name:"protocol",value:o.protocol,c:[OPTION({value:"ftp",c:"FTP"}),OPTION({value:"sftp",c:"SFTP"})],on:{change:(t,e)=>{void 0!==i&&("sftp"===e.getValue()?i.show():i.hide())}}}),INPUT({style:{marginTop:10,width:222,padding:8,border:"1px solid #999",borderRadius:4},name:"username",value:o.username,placeholder:"로그인 아이디"}),INPUT({style:{marginTop:10,width:222,padding:8,border:"1px solid #999",borderRadius:4},type:"password",name:"password",value:o.password,placeholder:"비밀번호"}),i=DIV({style:{display:"none",marginTop:10},c:[H3({c:"Private Key"}),INPUT({style:{marginTop:5,width:222,padding:8,border:"1px solid #999",borderRadius:4},name:"privateKey",type:"file",on:{change:(t,e)=>{let o=new FileReader;o.readAsText(e.getFiles()[0]),o.onload=(t=>{r=t.target.result})}}})]})]})},()=>{let n=t.getData();if(VALID.notEmpty(n.password)!==!0&&void 0===r)return SkyDesktop.Alert({msg:"비밀번호를 입력해주세요."}),!1;{n.privateKey=r;let i=VALID({title:{notEmpty:!0},host:{notEmpty:!0},username:{notEmpty:!0}}),a=i.check(n);if(a.checkHasError()===!0)return t.showErrors(a.getErrors()),!1;{let t=SkyDesktop.LoadingBar("lime");DasomEditor.IDE.ftpDestroy(o,()=>{DasomEditor.IDE.ftpNew(n,()=>{e.setTitle(n.title),s(),o=n,t.done()})})}}}),n.remove()}}}),SkyDesktop.ContextMenuItem({title:"삭제",on:{tap:()=>{SkyDesktop.Confirm({msg:"정말 삭제 하시겠습니까?"},()=>{let t=SkyDesktop.LoadingBar("lime");DasomEditor.IDE.ftpDestroy(o,()=>{t.done(),e.remove()})}),n.remove()}}})]});t.stop()});e.select=(()=>{e.addStyle({backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#17344D":"#A2C5FF"}),a=!0}),e.checkInSelected=(()=>{return a}),e.deselect=(()=>{e.addStyle({backgroundColor:"transparent"}),a=!1})}}),DasomEditor.HistoryItem=CLASS({preset:()=>{return UUI.BUTTON_H},params:()=>{return{style:{padding:"2px 5px",cursor:"default"},icon:IMG({src:DasomEditor.R("icon/calendar.png")}),spacing:5}},init:(t,e,o)=>{let n;e.on("mouseover",(t,e)=>{n!==!0&&e.addStyle({backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#003333":"#AFCEFF"})}),e.on("mouseout",(t,e)=>{n!==!0&&e.addStyle({backgroundColor:"transparent"})});e.select=(()=>{e.addStyle({backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#17344D":"#A2C5FF"}),n=!0}),e.checkInSelected=(()=>{return n}),e.deselect=(()=>{e.addStyle({backgroundColor:"transparent"}),n=!1})}}),DasomEditor.More=CLASS({preset:()=>{return UUI.BUTTON_H},params:()=>{return{style:{marginLeft:20,padding:"2px 5px",whiteSpace:"nowrap"}}}});